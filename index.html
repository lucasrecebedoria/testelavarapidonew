<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Move Buss • Login</title>
  <link rel="icon" href="assets/favicon.ico"/>
  <link rel="stylesheet" href="css/style.css"/>
</head>
<body class="login-body">
<main class="login-box">
  <img src="assets/logo.png" alt="logo" width="200"/>
  <h2>Acesso</h2>
  <div class="label">Matrícula</div>
  <input id="matricula" class="input" placeholder="ex: 6266"/>
  <div class="label">Senha</div>
  <input id="senha" type="password" class="input" placeholder="••••••••"/>
  <button id="btnLogin" class="btn green" style="margin-top:12px;width:100%">Entrar</button>
  <button class="btn" style="margin-top:8px;width:100%" onclick="location.href='register.html'">Novo usuário</button>
</main>
<footer class="footer">Developed by Lucas L Custodio, V1</footer>
<script type="module">
  import { auth, emailFromMatricula } from './js/firebase.js';
  import { signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
  const $=(q)=>document.querySelector(q);
  document.getElementById('btnLogin').addEventListener('click', async ()=>{
    const m=$('#matricula').value.trim();
    const p=$('#senha').value;
    if(!m||!p) return alert('Informe matrícula e senha.');
    try{
      await signInWithEmailAndPassword(auth, emailFromMatricula(m), p);
      location.href='app.html';
    }catch(e){ alert('Erro: '+e.message); }
  });
</script>
</body>
</html>